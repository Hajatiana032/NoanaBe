{% extends 'base.html.twig' %}

{% block title %}
  {{ parent() }}
{% endblock %}

{% block stylesheets %}
  <style>
    .ts-control {
      box-shadow: none !important;
    }
  </style>
{% endblock %}

{% block body %}
  <div class="container mt-md-2 mt-lg-5">
    <h1 class="text-cursive fw-bold">Vérification de ma commande</h1>
    {{ form_start(form) }}
    <div class="row">
      <div class="col-md-6">
        <div class="row mb-3">
          <div class="col-lg-6">{{ form_label(form.lastname) }}{{ form_widget(form.lastname) }}{{ form_errors(form.lastname) }}</div>
          <div class="col-lg-6">{{ form_label(form.firstname) }}{{ form_widget(form.firstname) }}{{ form_errors(form.firstname) }}</div>
        </div>
        <div class="row mb-3">
          <div class="col-lg-4">{{ form_label(form.phone) }}{{ form_widget(form.phone) }}{{ form_errors(form.phone) }}</div>
          <div class="col-lg-4">{{ form_label(form.address) }}{{ form_widget(form.address) }}{{ form_errors(form.address) }}</div>
          <div class="col-lg-4">{{ form_label(form.city) }}{{ form_widget(form.city) }}{{ form_errors(form.city) }}</div>
        </div>
        <button type="submit" class="btn btn-primary btn-lg mb-3">
          <i class="fa fa-check">&nbsp;</i>
          Valider la commande
        </button>
        {{ form_end(form) }}
      </div>
      <div class="col-md-6 m-auto text-end">
        <div class="card shadow ms-auto bg-light p-3 p-lg-5" style="max-width: 450px;">
          <div class="mb-3">
            <h4>Total à payer pour votre menu</h4>
            {% set totalPrice = total %}
            <h4 class="text-success fw-bold">{{ totalPrice|format_currency('MGA', {}, 'fr_MG') }}</h4>
          </div>
          <div class="mb-3">
            <h4>Frais de livraison</h4>
            <h4 id="shipping_cost"></h4>
          </div>
          <div>
            <h4>Montant total à payer</h4>
            <h1 id="total">{{ component('ShippingCost') }}</h1>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  {# //<script>
         //     window.addEventListener('DOMContentLoaded', () => {
         //       const city = document.querySelector('select')
         //       if (city) {
         //         city.addEventListener('change', async () => {
         //           await axios.get(`/commande/frais_de_livraison/${city.value}`).then((response) => {
         //             document.querySelector('#shipping_cost').innerHTML = `<span class="text-success fw-bold">${response.data.shippingCost}</span>`
         //             document.querySelector('#total').innerHTML = `<span class="text-success fw-bold">${response.data.totalPrice + response.data.shippingCost}</span>`
         //           })
         //         })
         //       }
         //     })
         //
       </script> #}
{% endblock %}
